<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Beer Tracker">
  <meta name="theme-color" content="#0a0a0f">
  <meta name="description" content="Track 1,000,000 beers with friends">
  <title>BEER TRACKER - 1,000,000 GOAL</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto+Mono:wght@700&display=swap" rel="stylesheet">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üç∫</text></svg>">
</head>
<body>
  <div id="app">
    <!-- Auth Screen -->
    <div id="auth-screen" class="screen">
      <div class="auth-container">
        <div class="scoreboard-header">
          <h1 class="neon-title">MILLION BEER<br>CHALLENGE</h1>
          <div class="goal-badge">GOAL: 1,000,000</div>
        </div>

        <div id="login-form" class="auth-form">
          <h2>PLAYER LOGIN</h2>
          <input type="email" id="login-username" placeholder="EMAIL" autocomplete="email">
          <input type="password" id="login-password" placeholder="PASSWORD" autocomplete="current-password">
          <button onclick="login()" class="btn-primary">ENTER ARENA</button>
          <p class="switch-text"><a href="#" onclick="showForgotPassword()">Forgot password?</a></p>
          <p class="switch-text">Got an invite? <a href="#" onclick="showRegister()">Join the team</a></p>
        </div>

        <div id="forgot-form" class="auth-form hidden">
          <h2>RESET PASSWORD</h2>
          <input type="email" id="forgot-email" placeholder="YOUR EMAIL" autocomplete="email">
          <button onclick="requestReset()" class="btn-primary">SEND RESET CODE</button>
          <p class="switch-text"><a href="#" onclick="showLogin()">Back to login</a></p>
        </div>

        <div id="reset-form" class="auth-form hidden">
          <h2>NEW PASSWORD</h2>
          <input type="text" id="reset-code" placeholder="RESET CODE">
          <input type="password" id="new-password" placeholder="NEW PASSWORD" autocomplete="new-password">
          <input type="password" id="confirm-password" placeholder="CONFIRM PASSWORD" autocomplete="new-password">
          <button onclick="resetPassword()" class="btn-primary">SET NEW PASSWORD</button>
          <p class="switch-text"><a href="#" onclick="showLogin()">Back to login</a></p>
        </div>

        <div id="register-form" class="auth-form hidden">
          <h2>JOIN THE TEAM</h2>
          <input type="text" id="invite-code" placeholder="INVITE CODE">
          <input type="email" id="reg-email" placeholder="YOUR EMAIL" autocomplete="email">
          <input type="text" id="reg-displayname" placeholder="DISPLAY NAME" autocomplete="nickname">
          <input type="password" id="reg-password" placeholder="CHOOSE PASSWORD" autocomplete="new-password">
          <button onclick="register()" class="btn-primary">JOIN CHALLENGE</button>
          <p class="switch-text">Already a player? <a href="#" onclick="showLogin()">Login</a></p>
        </div>

        <div id="auth-error" class="error-msg hidden"></div>
      </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboard-screen" class="screen hidden">
      <header class="dashboard-header">
        <div class="team-info">
          <span class="player-icon">&#127866;</span>
          <span id="player-name">PLAYER</span>
          <span id="admin-badge" class="admin-badge hidden">ADMIN</span>
        </div>
        <div class="header-actions">
          <button onclick="generateInvite()" class="btn-invite">+ INVITE</button>
          <button id="reset-btn" onclick="showResetConfirm()" class="btn-reset hidden">RESET</button>
          <button onclick="logout()" class="btn-logout">LOGOUT</button>
        </div>
      </header>

      <main class="scoreboard-main">
        <!-- Giant Counter -->
        <section class="counter-section">
          <div class="counter-label">BEERS REMAINING</div>
          <div class="mega-counter" id="mega-counter">
            <span class="digit">0</span>
            <span class="digit">0</span>
            <span class="digit">0</span>
            <span class="digit">,</span>
            <span class="digit">0</span>
            <span class="digit">0</span>
            <span class="digit">0</span>
          </div>
          <div class="goal-tracker">
            <div class="goal-bar">
              <div class="goal-fill" id="goal-fill"></div>
            </div>
            <div class="goal-text">
              <span id="progress">0</span> BEERS DRANK!
            </div>
          </div>
        </section>

        <!-- Drink Section with Beer Type and Photo -->
        <section class="drink-section">
          <div class="beer-type-input">
            <input type="text" id="beer-type" placeholder="WHAT BEER? (e.g. IPA, Lager, Stout)" maxlength="50">
          </div>
          <div class="photo-upload">
            <label for="beer-photo" class="photo-label">
              <span id="photo-icon">&#128247;</span>
              <span id="photo-text">SNAP YOUR BEER</span>
            </label>
            <input type="file" id="beer-photo" accept="image/*" capture="environment" onchange="handlePhotoSelect(this)">
            <div id="photo-preview" class="photo-preview hidden">
              <img id="preview-img" src="" alt="Beer preview">
              <button onclick="clearPhoto()" class="clear-photo">X</button>
            </div>
          </div>
          <button id="drink-btn" onclick="drinkBeer()" class="mega-drink-btn">
            <span class="beer-icon">&#127866;</span>
            <span class="drink-text">DRINK!</span>
          </button>
          <div id="verification-status" class="verification-status hidden"></div>
          <div class="your-count">
            YOUR BEERS: <span id="your-beers">0</span>
          </div>
        </section>

        <!-- Recent Drinks -->
        <section class="recent-section">
          <div class="recent-header">
            <h2>RECENT DRINKS</h2>
          </div>
          <div class="recent-drinks" id="recent-drinks">
            <!-- Populated by JS -->
          </div>
        </section>

        <!-- Leaderboard -->
        <section class="leaderboard-section">
          <div class="leaderboard-header">
            <h2>&#127942; LEADERBOARD &#127942;</h2>
          </div>
          <div class="leaderboard-table" id="leaderboard">
            <!-- Populated by JS -->
          </div>
        </section>
      </main>

      <!-- Invite Modal -->
      <div id="invite-modal" class="modal hidden">
        <div class="modal-content">
          <h3>INVITE A TEAMMATE</h3>
          <p>Share this link:</p>
          <input type="text" id="invite-link" readonly>
          <button onclick="copyInvite()" class="btn-primary">COPY LINK</button>
          <button onclick="closeInviteModal()" class="btn-secondary">CLOSE</button>
        </div>
      </div>

      <!-- Reset Confirmation Modal -->
      <div id="reset-modal" class="modal hidden">
        <div class="modal-content reset-modal">
          <h3>RESET ALL PROGRESS?</h3>
          <p class="reset-warning">This will reset ALL beer counts to 0 and delete all drink history. This cannot be undone!</p>
          <button onclick="confirmReset()" class="btn-danger">YES, RESET EVERYTHING</button>
          <button onclick="closeResetModal()" class="btn-secondary">CANCEL</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
